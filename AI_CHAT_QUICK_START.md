# AI 对话功能快速开始指南

## 🎯 功能概述

AI Ignite Note 现在拥有完整的 AI 对话功能，支持：

- ✅ **多轮对话**: 创建和管理多个对话会话
- ✅ **对话历史**: 自动保存和加载历史对话
- ✅ **Mock 模式**: 无需 API Key 即可测试功能
- ✅ **附件支持**: 上传文件并在对话中引用
- ✅ **智能回复**: 根据上下文提供相关建议

## 🚀 快速开始

### 1. 启动应用

```bash
# 启动后端
cd backend
npm run dev

# 启动前端
npm run dev
```

### 2. 打开 AI Panel

在应用中，AI Panel 通常位于右侧。如果没有显示：

- 点击工具栏的 AI 图标
- 或使用快捷键（如果已配置）

### 3. 开始对话

#### 使用 Mock 模式（推荐用于测试）

1. **无需任何配置**，直接开始对话
2. 输入消息并点击发送
3. 系统会自动使用 Mock 模式返回模拟回复
4. 尝试不同的关键词体验不同回复：
   ```
   - "hello" - 问候和介绍
   - "help" - 功能说明
   - "code" - 代码示例
   - "summary" - 摘要格式
   - "checklist" - 待办事项
   - "mindmap" - 思维导图
   ```

#### 配置真实 AI 提供商

1. **点击设置按钮**（齿轮图标）
2. **进入 AI Settings**
3. **选择提供商**:
   - Google Gemini（推荐，免费额度大）
   - Anthropic Claude
   - OpenAI GPT
   - Ollama（本地）
   - LM Studio（本地）
4. **输入 API Key**
5. **保存设置**

### 4. 管理对话

#### 创建新对话
- 点击底部的 **"New Chat"** 按钮
- 清空当前消息，开始新的会话

#### 清空当前对话
- 点击底部的 **"Clear Chat"** 按钮
- 确认后清空当前对话的消息（保留对话记录）

#### 查看历史对话
- 在左侧面板显示所有历史对话
- 点击任意对话加载其内容

#### 删除对话
- 悬停在对话历史项上
- 点击出现的删除按钮（垃圾桶图标）
- 确认后永久删除该对话

### 5. 使用附件

1. **点击附件按钮**（回形针图标）
2. **选择文件类型**:
   - 上传文件
   - 添加图片
3. **选择文件**
4. **预览附件**: 选中的文件会显示在输入框上方
5. **发送消息**: 附件信息会包含在消息中

## 💡 使用技巧

### 1. 利用快速操作

在 AI Panel 底部有几个快速操作按钮：

- **Summarize action items**: 提取待办事项
- **Generate a mind map**: 生成思维导图结构
- **Translate to 12 languages**: 翻译成多种语言

点击快速操作会自动填充提示词。

### 2. 切换助手角色

在顶部可以切换不同的 AI 助手：

- **General**: 通用助手
- **Coder**: 编程专家
- **Writer**: 写作助手
- **Data**: 数据分析
- **PM**: 产品经理

### 3. 切换 AI 提供商

在顶部可以快速切换 AI 提供商和模型：

1. 点击提供商下拉菜单
2. 选择不同的提供商
3. 选择具体的模型

## 🎨 界面说明

```
┌─────────────────────────────────────────┐
│  AI Panel                              │
├─────────────────────────────────────────┤
│  助手选择 | 提供商 | 模型               │
├─────────────────────────────────────────┤
│  ┌─────────┬─────────────────────────┐  │
│  │ 对话列表│  消息显示区域            │  │
│  │         │                         │  │
│  │ 对话1   │  用户: 你好              │  │
│  │ 对话2   │  AI:   你好！有什么...   │  │
│  │         │                         │  │
│  └─────────┴─────────────────────────┘  │
├─────────────────────────────────────────┤
│  快速操作按钮                           │
├─────────────────────────────────────────┤
│  [附件] [输入框] [发送按钮]             │
│  [New Chat] [Clear Chat]               │
└─────────────────────────────────────────┘
```

## ⚠️ 注意事项

### Mock 模式限制

Mock 模式用于测试和演示，有这些限制：

- ❌ 不理解真实内容
- ❌ 无法进行实际的分析
- ❌ 响应是预设的模板
- ✅ 适合测试 UI 和功能
- ✅ 适合演示和展示

### API Key 安全

- 🔐 不要在代码中硬编码 API Key
- 🔐 使用环境变量存储
- 🔐 不要在版本控制中提交
- 🔐 定期轮换 API Key

### 费用注意

使用真实 AI 提供商可能产生费用：

- 💰 Google Gemini: 有免费额度
- 💰 Claude: 按使用量计费
- 💰 OpenAI GPT: 按使用量计费
- 💰 Ollama/LM Studio: 完全免费（本地运行）

## 🐛 常见问题

### Q: 为什么我的消息没有回复？

**A:** 可能的原因：

1. **API Key 未配置**: 检查 AI Settings
2. **网络问题**: 检查网络连接
3. **API 额度用尽**: 检查提供商账户
4. **模型选择错误**: 尝试切换模型

### Q: 如何知道是否在使用 Mock 模式？

**A:** 查看回复开头：

- 如果有 "🤖 Mock Mode Active" 标识，则是 Mock 模式
- 真实的 AI 回复不会有这个标识

### Q: 对话保存在哪里？

**A:**

- 数据存储在后端数据库
- 需要登录才能访问
- 删除后无法恢复

### Q: 如何删除所有对话？

**A:**

目前需要逐个删除。未来的版本可能会添加批量删除功能。

## 📚 更多资源

- **完整功能文档**: 查看 `AI_CHAT_ENHANCEMENTS.md`
- **API 测试脚本**: 运行 `node test-ai-chat.js`
- **源代码**: 查看 `components/AIPanel.tsx` 和 `backend/src/services/ai.service.ts`

## 🎉 开始使用

现在您已经了解了所有功能，可以开始使用 AI 对话了！

记住：
- 从 Mock 模式开始测试
- 配置真实 AI 获得最佳体验
- 善用对话历史管理
- 尝试不同的助手角色

祝您使用愉快！🚀
